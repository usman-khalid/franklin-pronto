import{waitForLCP as d,sampleRUM as s}from"./lib-franklin.min.js";import{g as c,t as u,d as m,a as f,b as y,c as h,l as p,e as w,f as S,h as n,i as g}from"./block-utils.min.js";function b(){const e=(a,r)=>{r.split(",").forEach(i=>{a.classList.add(u(i.trim()))})},t=c("template");t&&e(document.body,t);const o=c("theme");o&&e(document.body,o)}const B=[];function q(e){const t=e.querySelector("h1"),o=e.querySelector("picture");if(t&&o&&t.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_PRECEDING){const a=document.createElement("div");a.append(g("hero",{elems:[o,t]})),e.prepend(a)}}async function l(){await n(`${window.hlx.codeBasePath}/dist/assets/fonts.min.css`);try{window.location.hostname.includes("localhost")||sessionStorage.setItem("fonts-loaded","true")}catch{}}function C(e){try{q(e)}catch(t){console.error("Auto Blocking failed",t)}}function E(e){m(e),f(e),C(e),y(e),h(e)}async function I(e){document.documentElement.lang="en",b();const t=e.querySelector("main");t&&(E(t),document.body.classList.add("appear"),await d(B));try{(window.innerWidth>=900||sessionStorage.getItem("fonts-loaded"))&&l()}catch{}}async function P(e){const t=e.querySelector("main");await p(t);const{hash:o}=window.location,a=o?e.getElementById(o.substring(1)):!1;o&&a&&a.scrollIntoView(),w(e.querySelector("header")),S(e.querySelector("footer")),n(`${window.hlx.codeBasePath}/dist/assets/lazy-styles.min.css`),l(),s("lazy"),s.observe(t.querySelectorAll("div[data-block-name]")),s.observe(t.querySelectorAll("picture > img"))}async function k(){await I(document),await P(document)}k();export{E as decorateMain};
