import{g,a as x}from"../../lib/block-utils.min.js";const A="_nav-wrapper_1yuah_4",_="_nav-hamburger_1yuah_34",S="_nav-brand_1yuah_79",w="_nav-sections_1yuah_92",L="_nav-tools_1yuah_120",q="_nav-drop_1yuah_214",a={navWrapper:A,navHamburger:_,navBrand:S,navSections:w,navTools:L,navDrop:q},c=window.matchMedia("(min-width: 900px)");function h(o){if(o.code==="Escape"){const e=document.getElementById("nav"),s=e.querySelector(`.${a.navSections}`),n=s.querySelector('[aria-expanded="true"]');n&&c.matches?(v(s),n.focus()):c.matches||(l(e,s),e.querySelector("button").focus())}}function D(o){const e=document.activeElement;if(e.className===a.navDrop&&(o.code==="Enter"||o.code==="Space")){const n=e.getAttribute("aria-expanded")==="true";v(e.closest(`.${a.navSections}`)),e.setAttribute("aria-expanded",n?"false":"true")}}function y(){document.activeElement.addEventListener("keydown",D)}function v(o,e=!1){o.querySelectorAll(`.${a.navSections} > ul > li`).forEach(s=>{s.setAttribute("aria-expanded",e)})}function l(o,e,s=null){const n=s!==null?!s:o.getAttribute("aria-expanded")==="true",p=o.querySelector(`.${a.navHamburger} button`);document.body.style.overflowY=n||c.matches?"":"hidden",o.setAttribute("aria-expanded",n?"false":"true"),v(e,n||c.matches?"false":"true"),p.setAttribute("aria-label",n?"Open navigation":"Close navigation");const t=e.querySelectorAll(`.${a.navDrop}`);c.matches?t.forEach(r=>{r.hasAttribute("tabindex")||(r.setAttribute("role","button"),r.setAttribute("tabindex",0),r.addEventListener("focus",y))}):t.forEach(r=>{r.removeAttribute("role"),r.removeAttribute("tabindex"),r.removeEventListener("focus",y)}),!n||c.matches?window.addEventListener("keydown",h):window.removeEventListener("keydown",h)}async function $(o){const e=g("nav"),s=e?new URL(e).pathname:"/nav",n=await fetch(`${s}.plain.html`);if(n.ok){const p=await n.text(),t=document.createElement("nav");t.id="nav",t.innerHTML=p;const r=["brand","sections","tools"],E={brand:a.navBrand,sections:a.navSections,tools:a.navTools};r.forEach((i,f)=>{const b=t.children[f];b&&b.classList.add(E[i])});const d=t.querySelector(`.${a.navSections}`);d&&d.querySelectorAll(":scope > ul > li").forEach(i=>{i.querySelector("ul")&&i.classList.add(a.navDrop),i.addEventListener("click",()=>{if(c.matches){const f=i.getAttribute("aria-expanded")==="true";v(d),i.setAttribute("aria-expanded",f?"false":"true")}})});const u=document.createElement("div");u.classList.add(a.navHamburger),u.innerHTML=`<button type="button" aria-controls="nav" aria-label="Open navigation">
        <span class="${a.navHamburger}-icon"></span>
      </button>`,u.addEventListener("click",()=>l(t,d)),t.prepend(u),t.setAttribute("aria-expanded","false"),l(t,d,c.matches),c.addEventListener("change",()=>l(t,d,c.matches)),x(t);const m=document.createElement("div");m.className=a.navWrapper,m.append(t),o.append(m)}}export{$ as default};
