import{g,a as x}from"../../lib/block-utils.min.js";const A="_nav-wrapper_1dd8y_4",_="_nav-hamburger_1dd8y_34",S="_nav-brand_1dd8y_79",w="_nav-sections_1dd8y_92",L="_nav-tools_1dd8y_120",q="_nav-drop_1dd8y_214",n={navWrapper:A,navHamburger:_,navBrand:S,navSections:w,navTools:L,navDrop:q},c=window.matchMedia("(min-width: 900px)");function h(o){if(o.code==="Escape"){const e=document.getElementById("nav"),s=e.querySelector(`.${n.navSections}`),a=s.querySelector('[aria-expanded="true"]');a&&c.matches?(v(s),a.focus()):c.matches||(u(e,s),e.querySelector("button").focus())}}function D(o){const e=document.activeElement;if(e.className===n.navDrop&&(o.code==="Enter"||o.code==="Space")){const a=e.getAttribute("aria-expanded")==="true";v(e.closest(`.${n.navSections}`)),e.setAttribute("aria-expanded",a?"false":"true")}}function y(){document.activeElement.addEventListener("keydown",D)}function v(o,e=!1){o.querySelectorAll(`.${n.navSections} > ul > li`).forEach(s=>{s.setAttribute("aria-expanded",e)})}function u(o,e,s=null){const a=s!==null?!s:o.getAttribute("aria-expanded")==="true",p=o.querySelector(`.${n.navHamburger} button`);document.body.style.overflowY=a||c.matches?"":"hidden",o.setAttribute("aria-expanded",a?"false":"true"),v(e,a||c.matches?"false":"true"),p.setAttribute("aria-label",a?"Open navigation":"Close navigation");const t=e.querySelectorAll(`.${n.navDrop}`);c.matches?t.forEach(r=>{r.hasAttribute("tabindex")||(r.setAttribute("role","button"),r.setAttribute("tabindex",0),r.addEventListener("focus",y))}):t.forEach(r=>{r.removeAttribute("role"),r.removeAttribute("tabindex"),r.removeEventListener("focus",y)}),!a||c.matches?window.addEventListener("keydown",h):window.removeEventListener("keydown",h)}async function $(o){const e=g("nav"),s=e?new URL(e).pathname:"/nav",a=await fetch(`${s}.plain.html`);if(a.ok){const p=await a.text(),t=document.createElement("nav");t.id="nav",t.innerHTML=p;const r=["brand","sections","tools"],E={brand:n.navBrand,sections:n.navSections,tools:n.navTools};r.forEach((i,f)=>{const b=t.children[f];b&&b.classList.add(E[i])});const d=t.querySelector(`.${n.navSections}`);d&&d.querySelectorAll(":scope > ul > li").forEach(i=>{i.querySelector("ul")&&i.classList.add(n.navDrop),i.addEventListener("click",()=>{if(c.matches){const f=i.getAttribute("aria-expanded")==="true";v(d),i.setAttribute("aria-expanded",f?"false":"true")}})});const l=document.createElement("div");l.classList.add(n.navHamburger),l.innerHTML=`<button type="button" aria-controls="nav" aria-label="Open navigation">
        <span class="${n.navHamburger}-icon"></span>
      </button>`,l.addEventListener("click",()=>u(t,d)),t.prepend(l),t.setAttribute("aria-expanded","false"),u(t,d,c.matches),c.addEventListener("change",()=>u(t,d,c.matches)),x(t);const m=document.createElement("div");m.className=n.navWrapper,m.append(t),o.append(m)}}export{$ as default};
