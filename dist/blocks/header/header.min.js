import{g as x,a as y}from"../../lib/block-utils.min.js";const A="_nav-wrapper_1akfe_4",_="_nav-hamburger_1akfe_34",S="_nav-brand_1akfe_79",w="_nav-sections_1akfe_92",L="_nav-tools_1akfe_120",k="_nav-drop_1akfe_214",a={navWrapper:A,navHamburger:_,navBrand:S,navSections:w,navTools:L,navDrop:k},c=window.matchMedia("(min-width: 900px)");function h(o){if(o.code==="Escape"){const e=document.getElementById("nav"),s=e.querySelector(`.${a.navSections}`),n=s.querySelector('[aria-expanded="true"]');n&&c.matches?(v(s),n.focus()):c.matches||(u(e,s),e.querySelector("button").focus())}}function q(o){const e=document.activeElement;if(e.className===a.navDrop&&(o.code==="Enter"||o.code==="Space")){const n=e.getAttribute("aria-expanded")==="true";v(e.closest(`.${a.navSections}`)),e.setAttribute("aria-expanded",n?"false":"true")}}function E(){document.activeElement.addEventListener("keydown",q)}function v(o,e=!1){o.querySelectorAll(`.${a.navSections} > ul > li`).forEach(s=>{s.setAttribute("aria-expanded",e)})}function u(o,e,s=null){const n=s!==null?!s:o.getAttribute("aria-expanded")==="true",p=o.querySelector(`.${a.navHamburger} button`);document.body.style.overflowY=n||c.matches?"":"hidden",o.setAttribute("aria-expanded",n?"false":"true"),v(e,n||c.matches?"false":"true"),p.setAttribute("aria-label",n?"Open navigation":"Close navigation");const t=e.querySelectorAll(`.${a.navDrop}`);c.matches?t.forEach(r=>{r.hasAttribute("tabindex")||(r.setAttribute("role","button"),r.setAttribute("tabindex",0),r.addEventListener("focus",E))}):t.forEach(r=>{r.removeAttribute("role"),r.removeAttribute("tabindex"),r.removeEventListener("focus",E)}),!n||c.matches?window.addEventListener("keydown",h):window.removeEventListener("keydown",h)}async function $(o){const e=x("nav"),s=e?new URL(e).pathname:"/nav",n=await fetch(`${s}.plain.html`);if(n.ok){const p=await n.text(),t=document.createElement("nav");t.id="nav",t.innerHTML=p;const r=["brand","sections","tools"],g={brand:a.navBrand,sections:a.navSections,tools:a.navTools};r.forEach((i,m)=>{const b=t.children[m];b&&b.classList.add(g[i])});const d=t.querySelector(`.${a.navSections}`);d&&d.querySelectorAll(":scope > ul > li").forEach(i=>{i.querySelector("ul")&&i.classList.add(a.navDrop),i.addEventListener("click",()=>{if(c.matches){const m=i.getAttribute("aria-expanded")==="true";v(d),i.setAttribute("aria-expanded",m?"false":"true")}})});const l=document.createElement("div");l.classList.add(a.navHamburger),l.innerHTML=`<button type="button" aria-controls="nav" aria-label="Open navigation">
        <span class="${a.navHamburger}-icon"></span>
      </button>`,l.addEventListener("click",()=>u(t,d)),t.prepend(l),t.setAttribute("aria-expanded","false"),u(t,d,c.matches),c.addEventListener("change",()=>u(t,d,c.matches)),y(t);const f=document.createElement("div");f.className=a.navWrapper,f.append(t),o.append(f)}}export{$ as default};
